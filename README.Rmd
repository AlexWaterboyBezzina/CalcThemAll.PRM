---
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# CatchThemAll.PRM

R package for calculating **Pesticide Risk Metric** values. This version only includes the 22 pesticides currently used in the Queensland Department of Environment and Science *Pesticide Risk Baseline for the Reef 2050 Water Quality Improvement Plan*.

## Meet the 22 Pesticides

```{r echo=FALSE, warning=FALSE, message=FALSE}
library(fontawesome)
library(shiny)
p(h3("9 Photosystem II (PSII) herbicides:"),
h5(p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Ametryn"),
p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Atrazine"),
p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Diuron"),
p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Hexazinone"),
p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Metribuzin"),
p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Prometryn"),
p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Simazine"),
p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Tebuthiuron"),
p(fa(name = "sun-plant-wilt", fill = "#28b78d", prefer_type = "solid"), "Terbuthylazine")),

h3("10 Other herbicides:"),
h5(p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "Haloxyfop (acid)"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "Imazapic"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "Metsulfuron methyl"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "Pendimethalin"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "Metolachlor"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "2,4-D"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "MCPA"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "Fluroxypyr"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "Triclopyr"),
p(fa(name = "flask", fill = "#ff5964", prefer_type = "solid"), "Isoxaflutole metabolite (DKN)")),

h3("3 Insecticides:"),
h5(p(fa(name = "bug", fill = "#feab3a", prefer_type = "solid"), "Chlorpyrifos"),
p(fa(name = "bug", fill = "#feab3a", prefer_type = "solid"), "Fipronil"),
p(fa(name = "bug", fill = "#feab3a", prefer_type = "solid"), "Imidacloprid")))

```

## Pesticide Risk Metric (PRM)

The combined toxicity risk of these 22 pesticides is estimated by the Pesticide Risk Metric. The risk is expressed as the percentage of species potentially affected (or conversely, protected) by the combined toxicity of the 22 pesticides over a standardised wet season (182 days from the first flush event). The current method for calculating PRM values as defined by Queensland Department of Envrionment and science can be found [here.](https://www.publications.qld.gov.au/dataset/method-development-pesticide-risk-metric-baseline-condition-of-waterways-to-gbr/resource/c65858f9-d7ba-4aef-aa4f-e148f950220f) The estimates can be compared to the three categories of ecosystem condition, as defined in the ![Australian and New Zealand Guidelines for Fresh & Marine Water Quality:](https://github.com/qg-qesd/WQI_CatchThemAll.PRM/blob/main/images/ANZG_table.PNG)

# How To Catch Them All (Calculate PRM)

The process for calculating PRM estimates using this method is split into **3 main parts/functions:**

1. Treating Limit of Reporting (LOR) concentration values (treat_LORs_all_data function)
2. Calculating daily average PRM estimates (calculate_daily_average_PRM)
3. Calculating wet season average PRM estimates (calculate_wet_season_average_PRM)

An example of how to run this package is provided below:

```{r example, echo=TRUE, warning=FALSE}
library(CatchThemAll.PRM)
Pesticide_Info <- CatchThemAll.PRM::Pesticide_Info

kanto_pesticides <- CatchThemAll.PRM::Kanto_pesticides
head(kanto_pesticides)

Kanto_pesticides_LOR_treated <- treat_LORs_all_data(raw_data = Kanto_pesticides, pesticide_info = Pesticide_Info)
head(Kanto_pesticides_LOR_treated)

Kanto_daily_PRM <- calculate_daily_average_PRM(LOR_treated_data = Kanto_pesticides_LOR_treated)
head(Kanto_daily_PRM)

Kanto_wet_season_PSII_PRM <- calculate_wet_season_average_PRM(daily_PRM_data = Kanto_daily_PRM, PRM_group = "Total PRM")
head(Kanto_wet_season_PSII_PRM)

```

## Daily Average Plots

This package also has a function for quickly plotting daily average PRM estimates plot_daily_PRM, for ![example:](https://github.com/qg-qesd/WQI_CatchThemAll.PRM/blob/main/images/plot_example.PNG)


## Disclaimer

**This package is still in development**. Information is from several sources and, as such, does not necessarily represent government or departmental policy. While every care is taken to ensure the accuracy of this information, the Department of Environment and Science makes no representations or warranties relating to  accuracy, reliability, completeness, currency or suitability for any particular purpose and disclaims all responsibility and all liability (including without limitation, liability in negligence) for all expenses, losses, damages (including indirect or consequential damage) and costs that might be incurred as a result of any use or of reliance on the information and calculated data in any way and for any reason.

## Citation

**R Package:**

*Bezzina A, Neelamraju C, Strauss J, Kaminski H, Roberts C, Glen J, Dias F. 2022. CatchThemAll.PRM: Pesticide Risk Metric Calculations. R package. Water Quality Monitoring & Investigations, Department of Environment and Science, Queensland Government. https://github.com/AlexWaterboyBezzina/CatchThemAll.PRM*

**Methods Behind Pesticide Risk Metric:**

*Warne MStJ, Neelamraju C, Strauss J, Smith RA, Turner RDR, Mann RM. 2020. Development of a method for estimating the toxicity of pesticide mixtures and a Pesticide Risk Baseline for the Reef 2050 Water Quality Improvement Plan. Brisbane: Department of Environment and Science, Queensland Government.*
